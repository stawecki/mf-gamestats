# mf-gamestats
UnrealScript logging mod and JS processing scripts for MF game events

## DISCLAIMER
## Use at your own risk. Backup your game data, before using this mod.

## Features

- mf-log-stats-events.js - Script for turning the MobileForces.log file with game event data into a JSON event list.
- mf-log-stats-parse.js - Script for parsing raw JSON event logs into simple game events.
- WindowConsole.uc - Modified Console script, which writes game events, status and scores to the main log file.

## Console Commands

- `autoplay X` - automatically trigger "demoplay" for chunked demo files, where X is the demo batch letter prefix. E.g. for demo files a1, a2, a3, execute "autoplay a" to play them one by one.

## Parsed Event Schema
Generated by `mf-log-stats-parse` from the log event list JSON.

```javascript
{
    "action": "Frag", // event action type
    "player": "Heywood", // event owner
    "time": 579, // time of event (seconds)
    "victim": "Carter", // event attribute for Frag
    "weapon": "Machinegun" // event attribute for Frag
}
```

## Log Object Schema
Generated by `mf-log-stats-events` from the .log file.

```javascript
{
  "Type": "Event", // stats log class "Event" (log game event), "Scorecheck" (score verification)
  "Score": [ // list of players - complete scorecard (state right before the event took place, before points are assigned)
    {
      "pn": "Joe", // Player name
      "s": "0.000000", // Score
      "d": "0.000000", // Deaths
      "tm": "0" // Team number (0 / 1)
    },
    {
      "pn": "Carter",
      "s": "1.000000",
      "d": "0.000000",
      "tm": "1"
    }
  ],
  "Game": {
    "gn": "Trailer", // Game name
    "gc": "RageGame.TrailerGame", // Game class
    "et": "87" // Elapsed time (seconds)
  },
  "Msg": {
    "type": "Event", // Message type. E.g. "Event" (game event), "Say" (chat), "TeamSay" (team chat), "DeathMessage" (usually anonymous death)
    "pn": "Joe", // Message's principal player (or sender)
    "msg": "Carter gunned down Joe." // Message text.
  }
}
```
